{"version":3,"file":"static/webpack/static/development/pages/index.js.bf9a14cf8a6592552ab4.hot-update.js","sources":["webpack:///./components/Posts/post.js"],"sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\nimport PropTypes from 'prop-types';\nimport Title from '../styled/Title';\nimport PostStyles from '../styled/PostStyles';\nimport DeletePost from './delete';\nimport User from '../User';\n\nfunction hasPermission(user, permissionsNeeded) {\n    const matchedPermissions = user.permissions.filter(permissionTheyHave =>\n        permissionsNeeded.includes(permissionTheyHave)\n    );\n    if (!matchedPermissions.length) {\n        return false;\n    } else {\n        return true;\n    }\n}\n\n\n\nexport default class Posts extends Component {\n    static propTypes = {\n        post: PropTypes.object.isRequired,\n    }\n\n    render() {\n        const { post } = this.props;\n\n        const { tags } = post;\n\n        let arr = [];\n\n        tags[0] && post.tags.forEach(tag => {\n            arr.push(<Link key={tag.id} href={{ pathname: '/tag', query: { hash: tag.hash } }}><a>#{tag.hash}</a></Link>)\n        });\n\n\n        return (\n            <User>\n                {({ data: { me } }) => (\n\n\n                    <PostStyles>\n                        {post.image &&\n                            <img src={post.image} alt={post.title} />\n                        }\n                        <Title>\n                            <Link href={{\n                                pathname: '/post',\n                                query: { id: post.id }\n                            }}>\n                                <a>{post.title}</a>\n                            </Link>\n                        </Title>\n                        <p>{post.description}</p>\n                        <div className=\"tags\">\n                            {arr[0] ? arr : 'Loading...'}\n                        </div>\n\n\n                        <div className=\"buttonList\">\n                            {me && hasPermission(me, ['ADMIN']) && (\n                                <>\n                                    <Link href={{\n                                        pathname: '/update',\n                                        query: { id: post.id }\n                                    }}>\n                                        <a>✏️</a>\n                                    </Link>\n                                    <DeletePost id={post.id}>\n                                        ❌\n                                    </DeletePost>\n                                </>\n                            )}\n                            {me && (\n                                <>\n                                    <button>❤️</button>\n                                    <button>Comment</button>\n                                </>\n                            )}\n                        </div>\n                    </PostStyles>\n                )}\n            </User>\n        )\n    }\n}\n\n\n{/* { ? <Link href=\"/createpost\"><a>Post</a></Link> : ''} */ }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;;AAKA;AAAA;AAAA;AAKA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAtCA;AA8CA;;;;AAjEA;AACA;AADA;AAEA;AADA;AACA;AAFA;AAqEA;AAAA;AAAA;;;;A","sourceRoot":""}